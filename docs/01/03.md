# 3. JPA란 무엇인가?

- JPA(Java Persistence API)는 자바 진영의 ORM 기술 표준이다. 애플리케이션과 JDBC 사이에서 동작한다.
- ORM(Object-Relational Mapping)은 객체와 관계형 데이터베이스를 매핑한다는 뜻이다.
- ORM 프레임워크는 객체와 테이블을 매핑해서 패러다임의 불일치 문제를 개발자 대신 해결해준다.
- 따라서 객체 측면에서는 정교한 객체 모델링을 할 수 있고 관계형 데이터베이스는 데이터베이스에 맞도록 모델링하면 된다.
- 자바 진영에서 많이 사용되는 ORM 프레임워크는 **하이버네이트**다.


## 3.1 JPA 소개

- 과거 자바 진영에서는 EJB라는 기술 표준을 만들었는데 그 안에 엔티티 빈이라는 ORM 기술도 포함되어 있었다.
- 너무 복잡하고 기술 성숙도가 떨어졌고 J2EE 애플리케이션 서버에서만 동작했다.
- 이즈음 하이버네이트라는 오픈소스 ORM 프레임워크가 등장했는데 가볍고 실용적이며 기술 성숙도가 높았다.
- 결국 EJB 3.0에서 하이버네이트를 기반으로 새로운 자바 ORM 기술표준을 만들었는데 이가 JPA다.
- JPA는 자바 ORM 기술에 대한 API 표준 명세다. 즉 인터페이스를 모아둔 것이다.
- JPA라는 표준 덕분에 특정 구현 기술에 대한 의존도를 줄일 수 있다.
- JPA 버전별 특징은 다음과 같다.
    - JPA 1.0(2006): 초기 버전이며 복합 키와 연관관계 기능이 부족했다.
    - JPA 2.0(2009): 대부분의 ORM 기능을 포함하고 JPA Criteria가 추가됐다.
    - JPA 2.1(2013): 스토어드 프로시저 접근, 컨터버, 엔티티 그래프 기능이 추가되었다.


## 3.2 왜 JPA를 사용해야 하는가?

### 생산성

- 자바 컬렉션에 객체를 저장하듯 JPA에게 저장할 객체를 전달하면 된다.
- SQL 작성과 반복적인 코드를 직접 작성하지 않아도 된다.
- 더 나아가 DDL문을 자동으로 생성해주는 기능이 있다.
- 이런 기능들을 사용하면 데이터베이스 설계 중심의 패러다임을 객체 설계 중심으로 역전시킬 수 있다.

### 유지보수

- SQL 의존적인 개발에선 엔티티에 필드를 추가하면 관련된 SQL과 결과를 매핑하는 코드를 모두 변경해야 했다.
- JPA는 이런 과정을 대신 처리해주므로 개발자가 수정해야 할 코드가 줄어든다.
- 또한 객체지향 언어가 가진 장점을 활용해 유지보수하기 좋은 도메인 모델을 편리하게 설계할 수 있다.

### 패러다임의 불일치 해결

- 상속, 연관관계, 객체 그래프 탐색, 비교하기와 같은 패러다임 불일치 문제를 해결해준다.

### 성능

- JPA는 애플리케이션과 데이터베이스 사이에서 다양한 성능 최적화 기회를 제공한다.
- 만약 같은 회원을 두 번 조회한다면 JPA는 처음에 조회한 회원 객체를 재사용한다.

### 데이터 접근 추상화와 벤더 독립성

- 관계형 데이터베이스는 같은 기능도 벤더마다 사용법이 다른 경우가 많다.
- JPA는 애플리케이션과 데이터베이스 사이에 추상화된 데이터 접근 계층을 제공해서 특정 기술에 종속되지 않게 한다.
- 예를 들어 로컬 개발 환경은 H2 DB, 개발이나 상용 환경은 오라클, MySQL 데이터베이스를 사용할 수 있다.

### 표준

- JPA는 자바 진영의 ORM 기술 표준이다. 따라서 다른 구현 기술로 손쉽게 변경할 수 있다.

-----
[Home](./index.md)
